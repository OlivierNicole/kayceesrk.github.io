<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Useri.Time.html">
<link rel="next" href="Useri.Mouse.html">
<link rel="Up" href="Useri.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="G2048" rel="Chapter" href="G2048.html">
<link title="Utils" rel="Chapter" href="Utils.html">
<link title="Test" rel="Chapter" href="Test.html">
<link title="Render" rel="Chapter" href="Render.html">
<link title="Anim" rel="Chapter" href="Anim.html">
<link title="Useri" rel="Chapter" href="Useri.html">
<link title="Useri_jsoo" rel="Chapter" href="Useri_jsoo.html"><link title="Surface mode" rel="Section" href="#smode">
<link title="Surface specification" rel="Section" href="#surfaces">
<link title="Application Surface" rel="Section" href="#surface">
<link title="Refreshing surfaces" rel="Section" href="#refreshing">
<title>Useri.Surface</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Useri.Time.html" title="Useri.Time">Previous</a>
&nbsp;<a class="up" href="Useri.html" title="Useri">Up</a>
&nbsp;<a class="post" href="Useri.Mouse.html" title="Useri.Mouse">Next</a>
</div>
<h1>Module <a href="type_Useri.Surface.html">Useri.Surface</a></h1>

<pre><span class="keyword">module</span> Surface: <code class="code"><span class="keyword">sig</span></code> <a href="Useri.Surface.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Rendering surface.
<p>

    An application has a single rendering surface that
    is specified by a <a href="Useri.Surface.html#TYPEt"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.t</code></a> value given to <a href="Useri.App.html#VALinit"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">App</span>.init</code></a>.<br>
</div>
<hr width="100%">
<br>
<h1 id="smode">Surface mode</h1>
<p>

      See also <a href="Useri_jsoo.Surface.html#smode">surface mode information</a>
      in the <code class="code"><span class="keywordsign">`</span><span class="constructor">Jsoo</span></code> backend.<br>

<pre><span id="TYPEmode"><span class="keyword">type</span> <code class="type"></code>mode</span> = <code class="type">[ `Fullscreen | `Windowed ]</code> </pre>
<div class="info ">
The type for surface modes.<br>
</div>


<pre><span id="VALmode"><span class="keyword">val</span> mode</span> : <code class="type"><a href="Useri.Surface.html#TYPEmode">mode</a> React.signal</code></pre><div class="info ">
<code class="code">mode</code> is the application's surface mode. The value of this
      signal is defined by the <code class="code">~mode</code> argument of the surface given
      to <a href="Useri.App.html#VALinit"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">App</span>.init</code></a>, the occurences of the event specified by
      <a href="Useri.Surface.html#VALset_mode_setter"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.set_mode_setter</code></a> and external events.<br>
</div>

<pre><span id="VALset_mode_setter"><span class="keyword">val</span> set_mode_setter</span> : <code class="type"><a href="Useri.Surface.html#TYPEmode">mode</a> React.event -> unit</code></pre><div class="info ">
<code class="code">set_mode_setter me</code> uses occurences of <code class="code">me</code> to set, if possible,
      the current surface's application mode and the value of <a href="Useri.Surface.html#VALmode"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.mode</code></a>.<br>
</div>

<pre><span id="VALmode_flip"><span class="keyword">val</span> mode_flip</span> : <code class="type">'a React.event -> <a href="Useri.Surface.html#TYPEmode">mode</a> React.event</code></pre><div class="info ">
<code class="code">mode_flip e</code> is an event which occur whenever <code class="code">e</code> does
      with the opposite mode of <a href="Useri.Surface.html#VALmode"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.mode</code></a>'s value.<br>
</div>

<pre><span id="VALpp_mode"><span class="keyword">val</span> pp_mode</span> : <code class="type">Format.formatter -> <a href="Useri.Surface.html#TYPEmode">mode</a> -> unit</code></pre><div class="info ">
<code class="code">pp_mode ppf m</code> prints an unspecified representation of <code class="code">m</code> on <code class="code">ppf</code>.<br>
</div>
<br>
<h1 id="surfaces">Surface specification</h1>
<p>

      See also <a href="Useri_jsoo.Surface.html#sspec">surface specification information</a>
      inf the <code class="code"><span class="keywordsign">`</span><span class="constructor">Jsoo</span></code> backend.<br>

<pre><span class="keyword">module</span> <a href="Useri.Surface.Gl.html">Gl</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Useri.Surface.Gl.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
The type for OpenGL surface specification.
</div>

<pre><span id="TYPEhandle"><span class="keyword">type</span> <code class="type"></code>handle</span> = <code class="type">Useri_base.Surface.handle</code> </pre>
<div class="info ">
The type for backend dependent surface handles.<br>
</div>


<pre><span id="TYPEkind"><span class="keyword">type</span> <code class="type"></code>kind</span> = <code class="type">[ `Gl of <a href="Useri.Surface.Gl.html#TYPEt">Gl.t</a> | `Other ]</code> </pre>
<div class="info ">
The type for surface kinds.<br>
</div>


<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>
<div class="info ">
The type for surface specification.<br>
</div>


<pre><span id="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">?hidpi:bool -><br>       ?pos:Gg.p2 -><br>       ?size:Gg.size2 -><br>       ?kind:<a href="Useri.Surface.html#TYPEkind">kind</a> -><br>       ?handle:<a href="Useri.Surface.html#TYPEhandle">handle</a> -><br>       ?mode:<a href="Useri.Surface.html#TYPEmode">mode</a> -> unit -> <a href="Useri.Surface.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">create hidpi pos size kind anchor mode  ()</code> is a surface specification
       with:
      <ul>
<li><code class="code">hidpi</code>, if <code class="code"><span class="keyword">true</span></code> (default) tries to get a high-dpi surface.</li>
<li><code class="code">pos</code>, a <em>hint</em> to position the surface by using <code class="code">pos</code> as
         the position of the top-left corner of the surface in its
         backend dependent display container.  The coordinates of the
         top-left corner of the display container is <code class="code">(0,0)</code> and
         coordinate increase in from top to bottom and left to
         right.</li>
<li><code class="code">size</code>, the size of the surface in logical pixels. Consult
         the individual backend documentation for the default value.</li>
<li><code class="code">kind</code> is the kind of surface.</li>
<li><code class="code">handle</code> is a backend dependent surface handle. In certain
         backends allows to interface <code class="code"><span class="constructor">Useri</span></code> with pre-existing surfaces.</li>
<li><code class="code">mode</code> is the the surface mode.</li>
</ul>

<p>

      <b>Note.</b> Currently the <code class="code">size</code> and <code class="code">pos</code> arguments are
      specified The actual raster size of the surface is in the
      <a href="Useri.Surface.html#VALraster_size"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.raster_size</code></a> signal. Note that future versions of this library
      will switch to physical dimensions (lack of backend support is
      the problem at the moment).<br>
</div>
<br>
<h1 id="surface">Application Surface</h1>
<p>

      See also information about <a href="Useri_jsoo.Surface.html#propsupdate">surface
      properties updates</a> in the <code class="code"><span class="keywordsign">`</span><span class="constructor">Jsoo</span></code> backend.
<p>

      <b>Warning.</b> These values and functions are defined
      only after <a href="Useri.App.html#VALinit"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">App</span>.init</code></a> was called.<br>

<pre><span id="VALpos"><span class="keyword">val</span> pos</span> : <code class="type">Gg.p2 React.signal</code></pre><div class="info ">
<code class="code">pos</code> is the position of the top-left corner of the surface
      in the surface's backend dependent display container.<br>
</div>

<pre><span id="VALraster_size"><span class="keyword">val</span> raster_size</span> : <code class="type">Gg.size2 React.signal</code></pre><div class="info ">
<code class="code">raster_size</code> is the application's surface underlying raster
      size.<br>
</div>

<pre><span id="VALsize"><span class="keyword">val</span> size</span> : <code class="type">Gg.size2 React.signal</code></pre><div class="info ">
<code class="code">size</code> is the application's surface logical size.<br>
</div>

<pre><span id="VALupdate"><span class="keyword">val</span> update</span> : <code class="type">unit -> unit</code></pre><div class="info ">
<code class="code">update ()</code> updates the rendering surface. This has
      to be called for your drawing commands to be taken into
      account.<br>
</div>

<pre><span id="VALhandle"><span class="keyword">val</span> handle</span> : <code class="type">unit -> Useri_base.Surface.handle</code></pre><div class="info ">
<code class="code">handle ()</code> is the application's surface backend dependent handle.<br>
</div>
<br>
<h1 id="refreshing">Refreshing surfaces</h1>
<p>

      These events are for coordinating rendering in an energy
      efficient manner. See <a href="Useri.html#rendercoord"><i>Input, animation and rendering coordination</i></a> for more information.<br>

<pre><span id="VALrefresh"><span class="keyword">val</span> refresh</span> : <code class="type">float React.event</code></pre><div class="info ">
<code class="code">refresh</code> occurs whenever the surface needs to be redrawn with
      the number of seconds since its last occurence or, for the
      first occurence, the number of seconds since the application
      start.
<p>

      The exact occurence frequency is unspecified but generally it
      should not exceed the <em>hinted</em> frequency of <a href="Useri.Surface.html#VALrefresh_hz"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.refresh_hz</code></a>
      hertz.
<p>

      More precisely the following occurences are guaranteed:
      <ul>
<li>Some time <em>after</em> the <a href="Useri.Surface.html#VALsize"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.size</code></a> signal changes value (including
         the first time during <a href="Useri.App.html#VALinit"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">App</span>.init</code></a>).</li>
<li>Some time <em>after</em> an occurence of the event set by
         <a href="Useri.Surface.html#VALset_refresher"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.set_refresher</code></a>.</li>
<li>Some time <em>after</em> a call to <a href="Useri.Surface.html#VALrequest_refresh"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.request_refresh</code></a>.</li>
<li>Some time <em>after</em> a <a href="Useri.Time.html#VALcount"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Time</span>.count</code></a> or <a href="Useri.Time.html#VALunit"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Time</span>.unit</code></a>
         signal is created or updates.</li>
</ul>

      <code class="code"><span class="constructor">Useri</span></code> guarantees that this event doesn't occur simultaneously
      with any of the events or signal it exposes.<br>
</div>

<pre><span id="VALrequest_refresh"><span class="keyword">val</span> request_refresh</span> : <code class="type">unit -> unit</code></pre><div class="info ">
<code class="code">request_refresh ()</code> has the effect of making <a href="Useri.Surface.html#VALrefresh"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.refresh</code></a>
      occur some time after it was called. This function call
      is cheap and can be abused (can be called in a React
      step).
<p>

      <b>Warning.</b> This function may be removed from the API in
      the future.<br>
</div>

<pre><span id="VALset_refresher"><span class="keyword">val</span> set_refresher</span> : <code class="type">'a React.event -> unit</code></pre><div class="info ">
<code class="code">set_refresher r</code> uses sets <code class="code">r</code> to be used to generate
      an occurence of <a href="Useri.Surface.html#VALrefresh"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.refresh</code></a> some time after each occurence of <code class="code">r</code>.<br>
</div>

<pre><span id="VALsteady_refresh"><span class="keyword">val</span> steady_refresh</span> : <code class="type">until:'a React.event -> unit</code></pre><div class="info ">
<code class="code">steady_refresh until</code> makes <a href="Useri.Surface.html#VALrefresh"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.refresh</code></a> occur at the hinted
      frequency of <a href="Useri.Surface.html#VALrefresh_hz"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.refresh_hz</code></a> hertz until <code class="code">until</code> occurs.<br>
</div>

<pre><span id="VALrefresh_hz"><span class="keyword">val</span> refresh_hz</span> : <code class="type">int React.signal</code></pre><div class="info ">
<code class="code">refresh_hz</code> is the maximal <em>hinted</em> frequency in hertz for <a href="Useri.Surface.html#VALrefresh"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.refresh</code></a>
      occurences. The initial value is <code class="code">60</code>.<br>
</div>

<pre><span id="VALset_refresh_hz"><span class="keyword">val</span> set_refresh_hz</span> : <code class="type">int -> unit</code></pre><div class="info ">
<code class="code">set_refresh_hz</code> sets the value of <a href="Useri.Surface.html#VALrefresh_hz"><code class="code"><span class="constructor">Useri</span>.<span class="constructor">Surface</span>.refresh_hz</code></a>.<br>
</div>
</body></html>