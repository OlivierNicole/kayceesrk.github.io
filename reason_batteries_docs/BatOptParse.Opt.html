<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="next" href="BatOptParse.StdOpt.html">
<link rel="Up" href="BatOptParse.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="BatArray" rel="Chapter" href="BatArray.html">
<link title="BatAvlTree" rel="Chapter" href="BatAvlTree.html">
<link title="BatBase64" rel="Chapter" href="BatBase64.html">
<link title="BatBig_int" rel="Chapter" href="BatBig_int.html">
<link title="BatBigarray" rel="Chapter" href="BatBigarray.html">
<link title="BatBitSet" rel="Chapter" href="BatBitSet.html">
<link title="BatBool" rel="Chapter" href="BatBool.html">
<link title="BatBounded" rel="Chapter" href="BatBounded.html">
<link title="BatBuffer" rel="Chapter" href="BatBuffer.html">
<link title="BatBytes" rel="Chapter" href="BatBytes.html">
<link title="BatCache" rel="Chapter" href="BatCache.html">
<link title="BatChar" rel="Chapter" href="BatChar.html">
<link title="BatCharParser" rel="Chapter" href="BatCharParser.html">
<link title="BatComplex" rel="Chapter" href="BatComplex.html">
<link title="BatConcurrent" rel="Chapter" href="BatConcurrent.html">
<link title="BatDeque" rel="Chapter" href="BatDeque.html">
<link title="BatDigest" rel="Chapter" href="BatDigest.html">
<link title="BatDllist" rel="Chapter" href="BatDllist.html">
<link title="BatDynArray" rel="Chapter" href="BatDynArray.html">
<link title="BatEnum" rel="Chapter" href="BatEnum.html">
<link title="BatFile" rel="Chapter" href="BatFile.html">
<link title="BatFingerTree" rel="Chapter" href="BatFingerTree.html">
<link title="BatFloat" rel="Chapter" href="BatFloat.html">
<link title="BatFormat" rel="Chapter" href="BatFormat.html">
<link title="BatGc" rel="Chapter" href="BatGc.html">
<link title="BatGenlex" rel="Chapter" href="BatGenlex.html">
<link title="BatGlobal" rel="Chapter" href="BatGlobal.html">
<link title="BatHashcons" rel="Chapter" href="BatHashcons.html">
<link title="BatHashtbl" rel="Chapter" href="BatHashtbl.html">
<link title="BatHeap" rel="Chapter" href="BatHeap.html">
<link title="BatIMap" rel="Chapter" href="BatIMap.html">
<link title="BatIO" rel="Chapter" href="BatIO.html">
<link title="BatISet" rel="Chapter" href="BatISet.html">
<link title="BatInnerIO" rel="Chapter" href="BatInnerIO.html">
<link title="BatInnerPervasives" rel="Chapter" href="BatInnerPervasives.html">
<link title="BatInnerWeaktbl" rel="Chapter" href="BatInnerWeaktbl.html">
<link title="BatInt" rel="Chapter" href="BatInt.html">
<link title="BatInt32" rel="Chapter" href="BatInt32.html">
<link title="BatInt64" rel="Chapter" href="BatInt64.html">
<link title="BatInterfaces" rel="Chapter" href="BatInterfaces.html">
<link title="BatLazyList" rel="Chapter" href="BatLazyList.html">
<link title="BatLexing" rel="Chapter" href="BatLexing.html">
<link title="BatList" rel="Chapter" href="BatList.html">
<link title="BatLog" rel="Chapter" href="BatLog.html">
<link title="BatLogger" rel="Chapter" href="BatLogger.html">
<link title="BatMap" rel="Chapter" href="BatMap.html">
<link title="BatMarshal" rel="Chapter" href="BatMarshal.html">
<link title="BatMultiMap" rel="Chapter" href="BatMultiMap.html">
<link title="BatMultiPMap" rel="Chapter" href="BatMultiPMap.html">
<link title="BatMutex" rel="Chapter" href="BatMutex.html">
<link title="BatNativeint" rel="Chapter" href="BatNativeint.html">
<link title="BatNum" rel="Chapter" href="BatNum.html">
<link title="BatNumber" rel="Chapter" href="BatNumber.html">
<link title="BatOo" rel="Chapter" href="BatOo.html">
<link title="BatOptParse" rel="Chapter" href="BatOptParse.html">
<link title="BatOption" rel="Chapter" href="BatOption.html">
<link title="BatOrd" rel="Chapter" href="BatOrd.html">
<link title="BatParserCo" rel="Chapter" href="BatParserCo.html">
<link title="BatPathGen" rel="Chapter" href="BatPathGen.html">
<link title="BatPervasives" rel="Chapter" href="BatPervasives.html">
<link title="BatPrintexc" rel="Chapter" href="BatPrintexc.html">
<link title="BatPrintf" rel="Chapter" href="BatPrintf.html">
<link title="BatQueue" rel="Chapter" href="BatQueue.html">
<link title="BatRMutex" rel="Chapter" href="BatRMutex.html">
<link title="BatRandom" rel="Chapter" href="BatRandom.html">
<link title="BatRef" rel="Chapter" href="BatRef.html">
<link title="BatRefList" rel="Chapter" href="BatRefList.html">
<link title="BatResult" rel="Chapter" href="BatResult.html">
<link title="BatReturn" rel="Chapter" href="BatReturn.html">
<link title="BatScanf" rel="Chapter" href="BatScanf.html">
<link title="BatSeq" rel="Chapter" href="BatSeq.html">
<link title="BatSet" rel="Chapter" href="BatSet.html">
<link title="BatSplay" rel="Chapter" href="BatSplay.html">
<link title="BatStack" rel="Chapter" href="BatStack.html">
<link title="BatStream" rel="Chapter" href="BatStream.html">
<link title="BatString" rel="Chapter" href="BatString.html">
<link title="BatSubstring" rel="Chapter" href="BatSubstring.html">
<link title="BatSys" rel="Chapter" href="BatSys.html">
<link title="BatText" rel="Chapter" href="BatText.html">
<link title="BatTuple" rel="Chapter" href="BatTuple.html">
<link title="BatUChar" rel="Chapter" href="BatUChar.html">
<link title="BatUTF8" rel="Chapter" href="BatUTF8.html">
<link title="BatUnit" rel="Chapter" href="BatUnit.html">
<link title="BatUnix" rel="Chapter" href="BatUnix.html">
<link title="BatUref" rel="Chapter" href="BatUref.html">
<link title="BatVect" rel="Chapter" href="BatVect.html">
<link title="Batteries" rel="Chapter" href="Batteries.html">
<link title="BatteriesConfig" rel="Chapter" href="BatteriesConfig.html">
<link title="BatteriesExceptionless" rel="Chapter" href="BatteriesExceptionless.html">
<link title="BatteriesPrint" rel="Chapter" href="BatteriesPrint.html">
<link title="BatteriesThread" rel="Chapter" href="BatteriesThread.html">
<link title="Extlib" rel="Chapter" href="Extlib.html"><link title="Exceptions" rel="Section" href="#6_Exceptions">
<link title="Types" rel="Section" href="#6_Types">
<link title="Option value retrieval" rel="Section" href="#6_Optionvalueretrieval">
<link title="Option creation" rel="Section" href="#6_Optioncreation">
<title>Batteries user guide : BatOptParse.Opt</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="BatOptParse.html" title="BatOptParse">Up</a>
&nbsp;<a class="post" href="BatOptParse.StdOpt.html" title="BatOptParse.StdOpt">Next</a>
</div>
<h1>Module <a href="type_BatOptParse.Opt.html">BatOptParse.Opt</a></h1>

<pre><span class="keyword">module</span> Opt: <code class="code">{</code> <a href="BatOptParse.Opt.html">..</a> <code class="code">}</code></pre><div class="info module top">
This module contains the basic functions and types for defining
    new option types and accessing the values of options.<br>
</div>
<hr width="100%">
<br>
<h6 id="6_Exceptions">Exceptions</h6><br>

<pre><span id="EXCEPTIONNo_value"><span class="keyword">exception</span> No_value</span></pre>
<div class="info ">
<code class="code"><span class="constructor">No_value</span></code> gets raised by <code class="code"><span class="constructor">OptParse</span>.<span class="constructor">Opt</span>.get</code> when an option
      value is not available.<br>
</div>

<pre><span id="EXCEPTIONOption_error"><span class="keyword">exception</span> Option_error</span> <span class="keyword">of</span> <code class="type">string string</code></pre>
<div class="info ">
This exception signals that an option value is invalid. The
      first string contains the option string ('-x' or '--long-name')
      and the second string contains an error message.
<p>

      This exception is only used when implementing custom option types
      and can never "escape" the scope of a <code class="code"><span class="constructor">OptParse</span>.<span class="constructor">OptParser</span>.parse</code>.
      The user should therefore not attempt to catch it.<br>
</div>

<pre><span id="EXCEPTIONOption_help"><span class="keyword">exception</span> Option_help</span></pre>
<div class="info ">
When an option wants to display a usage message, this exception
      may be raised.  It can never "escape" the scope of a
      <code class="code"><span class="constructor">OptParse</span>.<span class="constructor">OptParser</span>.parse</code> call and the user should therefore not
      attempt to catch it.<br>
</div>
<br>
<h6 id="6_Types">Types</h6><br>

<pre><code><span id="TYPEt"><span class="keyword">type</span> t <code class="type">'a</code></span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.option_set">option_set</span>&nbsp;: <code class="type">string => list string => unit</code>,</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.option_set_value">option_set_value</span>&nbsp;: <code class="type">'a => unit</code>,</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.option_get">option_get</span>&nbsp;: <code class="type">unit => option 'a</code>,</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.option_metavars">option_metavars</span>&nbsp;: <code class="type">list string</code>,</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.option_defhelp">option_defhelp</span>&nbsp;: <code class="type">option string</code>,</code></td>

</tr></table>
}

<div class="info ">
Option type.
<p>

      <code class="code">option_set</code> is a closure which converts and records the value of
      an option so that it can be retrieved with a later call to the
      <code class="code">option_get</code> closure. It is called with the option name which was
      given on the command line and a list of strings, each representing
      one of the argument values given on the command line. It may raise
      <code class="code"><span class="constructor">Option_error</span></code> if the value is invalid (for whatever reason).
<p>

      <code class="code">option_set_value</code> is a closure which sets the value of an option
      to a particular value.
<p>

      <code class="code">option_get</code> is a closure which retrieves the recorded value
      of the option. If the option value has not been set from the
      command line, the default value is used.  If there is no default
      value, then <code class="code"><span class="constructor">None</span></code> should be returned.
<p>

      <code class="code">option_metavars</code> is a list of "meta-variables" (arguments)
      which this option accepts. This is mainly for display purposes,
      but the length of this list determines how many arguments the
      option parser accepts for this option (currently only lists of
      length 0 or 1 are supported).
<p>

      <code class="code">option_defhelp</code> is the default help string (if any).  It is
      used for displaying help messages whenever the user does <b>      not</b> specify a help string manually when adding this
      option. Using a non-None value here only makes sense for
      completely generic options like <code class="code"><span class="constructor">OptParse</span>.<span class="constructor">StdOpt</span>.help_option</code>.<br>
</div>

<br>
<h6 id="6_Optionvalueretrieval">Option value retrieval</h6><br>

<pre><span id="VALget"><span class="keyword">let</span> get</span> : <code class="type"><a href="BatOptParse.Opt.html#TYPEt">t</a> 'a => 'a</code></pre><div class="info ">
Get the value of an option.<br>
<b>Raises</b> <code>No_value</code> if no default values has been given
      and the option value has not been set from the command line.<br>
<b>Returns</b> the value of the option. If the option has not been
      encountered while parsing the command line, the default value is
      returned.<br>
</div>

<pre><span id="VALset"><span class="keyword">let</span> set</span> : <code class="type"><a href="BatOptParse.Opt.html#TYPEt">t</a> 'a => 'a => unit</code></pre><div class="info ">
Set the value of an option.<br>
</div>

<pre><span id="VALopt"><span class="keyword">let</span> opt</span> : <code class="type"><a href="BatOptParse.Opt.html#TYPEt">t</a> 'a => option 'a</code></pre><div class="info ">
Get the value of an option as an optional value.<br>
<b>Returns</b> <code class="code"><span class="constructor">Some</span> x</code> if the option has value <code class="code">x</code> (either by default or
      from the command line). If the option doesn't have a value <code class="code"><span class="constructor">None</span></code>
      is returned.<br>
</div>

<pre><span id="VALis_set"><span class="keyword">let</span> is_set</span> : <code class="type"><a href="BatOptParse.Opt.html#TYPEt">t</a> 'a => bool</code></pre><div class="info ">
Find out if the option has a value (either by default or
      from the command line).<br>
<b>Returns</b> <code class="code"><span class="constructor">True</span></code> iff the option has a value.<br>
</div>
<br>
<h6 id="6_Optioncreation">Option creation</h6><br>

<pre><span id="VALvalue_option"><span class="keyword">let</span> value_option</span> : <code class="type">string =><br>       option 'a =><br>       (string => 'a) => (exn => string => string) => <a href="BatOptParse.Opt.html#TYPEt">t</a> 'a</code></pre><div class="info ">
Make an option which takes a single argument.
<p>

      <code class="code">value_option metavar default coerce errfmt</code> returns an option
      which takes a single argument from the command line and calls
      <code class="code">coerce</code> to coerce it to the proper type. If <code class="code">coerce</code> raises an
      exception, <code class="code">exn</code>, then <code class="code">errfmt exn argval</code> is called to generate
      an error message for display. <code class="code">metavar</code> is the name of the
      metavariable of the option.
<p>

      <code class="code">default</code> is the default value of the option. If <code class="code"><span class="constructor">None</span></code>, the
      option has no default value.<br>
<b>Returns</b> the newly created option.<br>
</div>

<pre><span id="VALcallback_option"><span class="keyword">let</span> callback_option</span> : <code class="type">string =><br>       (string => 'a) =><br>       (exn => string => string) => ('a => unit) => <a href="BatOptParse.Opt.html#TYPEt">t</a> unit</code></pre><div class="info ">
Make a callback option which takes a single argument.
<p>

        <code class="code">callback_option metavar coerce errfmt f</code> returns an option which
        takes a single argument from the command line and calls <code class="code">coerce</code>
        to coerce it to the proper type. If <code class="code">coerce</code> raises an exception
        <code class="code">errfmt exn argval</code> is called to format an error message for
        display. If <code class="code">coerce</code> succeeds, the callback function <code class="code">f</code> is called
        with the coerced value. Finally, <code class="code">metavar</code> is the name of the
        metavariable of the option.<br>
<b>Returns</b> the newly created option.<br>
</div>
</body></html>